package com.tunahanozturk.tests;

import com.tunahanozturk.base.DriverFactory;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.testng.annotations.*;
import static org.testng.Assert.assertTrue;

public class HomePageOpenTest {

    private WebDriver driver;

    @BeforeMethod
    public void setup() {
        DriverFactory.init();
        driver = DriverFactory.get();
    }

    @AfterMethod
    public void tearDown() {
        DriverFactory.quit();
    }

    @Test
    public void homePageShouldBeOpen() {
        // To ensure the homepage is fully loaded, I preferred verifying multiple elements instead of relying on a single one.
        // This is because if the chosen element (e.g., logo) fails to load, the test might incorrectly appear as failed even though the page is actually open.
        // 1) URL check
        // 2) Navbar visibility
        // 3) Logo visibility

        driver.get("https://useinsider.com/");

        assertTrue(driver.getCurrentUrl().startsWith("https://useinsider.com/"),
                "URL does not start with the expected value!");

        WebElement navbar = driver.findElement(By.id("navigation"));
        assertTrue(navbar.isDisplayed(), "Navbar is not visible!");

        WebElement logo = driver.findElement(By.xpath("//nav[@id='navigation']//img[@alt='insider_logo']"));
        assertTrue(logo.isDisplayed(), "Logo is not visible!");
    }
}
